<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="../css/style.css" type="text/css">


        <title>Start Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <h1>Klantenlijst</h1>
        <br/>
        <h2>Alle klanten in database</h2>
        <br/>
        <form>
            <table id="klanten">
                <thead id="klantenTitle">
                </thead>
                <tbody id="klantenBody">
                </tbody>
            </table>
        </form>
        
        <br/>
        <button type="button" id="editKlant">Bewerk deze klant-gegevens</button>
        <br/>
        <button type="button" id="deleteKlant">Verwijder deze klant</button>
        
        <br/>
        <h2>Voeg nieuw klant toe</h2>
        <br/>
        <form id="nieuwKlant" method="post">
            <table>
                <tr>
                    <td>Voornaam</td>
                    <td><input type="text" size="40" id="voornaam"/></td>
                </tr><tr>
                    <td>Tussenvoegsel</td>
                    <td><input type="text" id="tussenvoegsel" size="10"/></td>
                </tr><tr>
                    <td>Achternaam</td>
                    <td><input type="text" size="40" id="achternaam"/></td>
                </tr><tr>
                    <td>E-mail</td>
                    <td><input type="text" size="80" id="email"/></td>
                </tr><tr>
                    <td></td><td>
                        <input type="submit" value="Voeg klant toe"/></td>
                </tr>
            </table>
        </form>
        <p id="error"></p>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.js"></script>
        <!--
        <script>
            $(document).ready(function(){
                var restURL = "http://localhost:8080/RestTest/rest/klant";
                
                $.getJSON(restURL, function(result){
                    $.each(result, function(i, field){
                        $("#klantenBody").append("<tr id='" + field.idKlant + "'></tr>");
                        for (var p in field){
                            if(i===0){
                                $("#klantenTitle").append("<th>" + p + "</th>");
                            }
                            $("tr#" + field.idKlant).append("<td>" + field[p] + "</td>");
                        }
                        if (i===0){
                            $("#klantenTitle").append("<th>Actie</th>");
                        }
                        $("tr#" + field.idKlant).append("<td id='select'><button type='button' id='"+ field.idKlant + "'>Selecteer</button>");
                    });
                });
                
                var selectedId = 0;
                
                $(document).on("click", "td#select button", function(){
                    alert("button clicked");
                    selectedId = $(this).attr('id');
                    $("tr").removeClass('highlight');
                    $("tr#" + selectedId).addClass('highlight');
                    $('button#deleteKlant').removeAttr("hidden");
                });
                
                $("#nieuwKlant").submit(function(){
                    //$.post(restURL, formToJson(), alert(formToJson()));
                    $.ajax({
                        type: 'POST',
                        contentType: 'application/json',
                        url: restURL,
                        dataType: "application/json",
                        data: formToJson(),
                        success: function(data, textStatus, jqXHR){
                            alert(formToJson());
                        },
                        error: function(jqXHR, textStatus, errorThrown){
                            alert('Error: ' + errorThrown + formToJson());
                        }
                    });
                });
                
                function formToJson(){
                    return JSON.stringify({
                        "achternaam": $("#achternaam").val(),
                        "email": $("#email").val(),
                        "tussenvoegsel": $("#tussenvoegsel").val(),
                        "voornaam": $("#voornaam").val()
                    });
                }
                
                $('button#deleteKlant').click(function(){
                    var URL = restURL + "/" + selectedId;
                    $.ajax({
                        type: 'DELETE',
                        url: URL,
                        success: function(data, textStatus, jqXHR){
                            alert(url);
                        },
                        error: function(jqXHR, textStatus, errorThrown){
                            alert(url);
                        }
                    });
                });
            });
        </script>
        -->
        <script src="../js/klant.js"></script>
        
    </body>
</html>
